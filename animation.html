<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
		#canvas{
			background:#ccc;
		}
	</style>
</head>
<body>
<canvas id="canvas" width="800" height="600"></canvas>
	
<script src="https://code.jquery.com/jquery-3.1.1.js"></script>
<script>
/*-------------------
 * アニメーション
 *------------------*/
const can =  $("#canvas")[0];
const ctx = can.getContext("2d");

ctx.fillStyle = "#990";
let ob = {x:50,y:50};
	
ctx.fillRect(ob.x,ob.y,10,10);

let animation = function(){
	ctx.clearRect(ob.x,ob.y,10,10);
	ob.x +=1;
	ob.y +=1;
	ctx.fillRect(ob.x,ob.y,10,10);
	console.log(ob.y);
	if(ob.y>=can.height-10||ob.x>=can.width){
		clearInterval(timer);

	}
}	
let timer = setInterval(animation,10);

	
//下記はrequrestAnimationFrameを使用した場合
//var requestAnimationFrame = window.requestAnimationFrame ||
//						 window.mozRequestAnimationFrame ||
//												 window.webkitRequestAnimationFrame ||
//						 window.msRequestAnimationFrame;
//window.requestAnimationFrame = requestAnimationFrame;
//	
//window.requestAnimationFrame(animation);
//var startTime = new Date().getTime();
//(function animation(){
//    window.requestAnimationFrame(animation);
//    var currentTime = new Date().getTime();　
//    var status = (startTime - currentTime) 
//    console.log(status);
//		ctx.clearRect(ob.x,ob.y,10,10);
//		ob.x +=1;
//		ob.y +=1;
//		ctx.fillRect(ob.x,ob.y,10,10);
//})();
</script>

</body>
</html>